{"version":3,"sources":["pagination.js","reframe.min.js","main.js"],"names":["pagination","isInfinite","done","isMasonry","feedElement","document","querySelector","let","loading","async","loadNextPage","nextElement","html","await","fetch","href","text","doc","DOMParser","parseFromString","postElements","querySelectorAll","fragment","createDocumentFragment","elems","forEach","post","clonedItem","importNode","style","visibility","appendChild","push","loadNextWithCheck","resNextElement","remove","buttonElement","e","target","nextElementSibling","parentElement","getBoundingClientRect","top","window","innerHeight","observer","IntersectionObserver","entries","isIntersecting","disconnect","observe","addEventListener","t","exports","module","define","amd","globalThis","self","reframe","this","n","arguments","length","i","Array","o","r","f","d","s","l","className","split","indexOf","width","getAttribute","offsetHeight","offsetWidth","parseInt","createElement","position","paddingTop","height","left","parentNode","insertBefore","removeChild","join","head","burger","verdinBody","getElementsByTagName","classList","contains","add"],"mappings":"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","file":"main.min.js","sourcesContent":["function pagination(isInfinite, done, isMasonry = false) {\n    const feedElement = document.querySelector('.gh-feed');\n    if (!feedElement) return;\n\n    let loading = false;\n    const target = feedElement.nextElementSibling || feedElement.parentElement.nextElementSibling || document.querySelector('.gh-foot');\n    const buttonElement = document.querySelector('.gh-loadmore');\n\n    const loadNextPage = async function () {\n        const nextElement = document.querySelector('link[rel=next]');\n        if (!nextElement) return;\n\n        try {\n            const res = await fetch(nextElement.href);\n            const html = await res.text();\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(html, 'text/html');\n\n            const postElements = doc.querySelectorAll('.gh-feed:not(.gh-featured):not(.gh-related) > *');\n            const fragment = document.createDocumentFragment();\n            const elems = [];\n\n            postElements.forEach(function (post) {\n                var clonedItem = document.importNode(post, true);\n\n                if (isMasonry) {\n                    clonedItem.style.visibility = 'hidden';\n                }\n\n                fragment.appendChild(clonedItem);\n                elems.push(clonedItem);\n            });\n\n            feedElement.appendChild(fragment);\n\n            if (done) {\n                done(elems, loadNextWithCheck);\n            }\n\n            const resNextElement = doc.querySelector('link[rel=next]');\n            if (resNextElement && resNextElement.href) {\n                nextElement.href = resNextElement.href;\n            } else {\n                nextElement.remove();\n                if (buttonElement) {\n                    buttonElement.remove();\n                }\n            }\n        } catch (e) {\n            nextElement.remove();\n            throw e;\n        }\n    };\n\n    const loadNextWithCheck = async function () {\n        if (target.getBoundingClientRect().top <= window.innerHeight && document.querySelector('link[rel=next]')) {\n            await loadNextPage();\n        }\n    }\n\n    const callback = async function (entries) {\n        if (loading) return;\n\n        loading = true;\n\n        if (entries[0].isIntersecting) {\n            // keep loading next page until target is out of the viewport or we've loaded the last page\n            if (!isMasonry) {\n                while (target.getBoundingClientRect().top <= window.innerHeight && document.querySelector('link[rel=next]')) {\n                    await loadNextPage();\n                }\n            } else {\n                await loadNextPage();\n            }\n        }\n\n        loading = false;\n\n        if (!document.querySelector('link[rel=next]')) {\n            observer.disconnect();\n        }\n    };\n\n    const observer = new IntersectionObserver(callback);\n\n    if (isInfinite) {\n        observer.observe(target);\n    } else {\n        buttonElement.addEventListener('click', loadNextPage);\n    }\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).reframe=t()}(this,function(){\"use strict\";function t(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],f=0,d=r.length;f<d;f++,o++)i[o]=r[f];return i}return function(e,s){return void 0===s&&(s=\"js-reframe\"),(\"string\"==typeof e?t(document.querySelectorAll(e)):\"length\"in e?t(e):[e]).forEach(function(e){var t,n,i,o,r,f,d,l;-1!==e.className.split(\" \").indexOf(s)||-1<e.style.width.indexOf(\"%\")||(i=e.getAttribute(\"height\")||e.offsetHeight,o=e.getAttribute(\"width\")||e.offsetWidth,r=(\"string\"==typeof i?parseInt(i):i)/(\"string\"==typeof o?parseInt(o):o)*100,(f=document.createElement(\"div\")).className=s,(d=f.style).position=\"relative\",d.width=\"100%\",d.paddingTop=r+\"%\",(l=e.style).position=\"absolute\",l.width=\"100%\",l.height=\"100%\",l.left=\"0\",l.top=\"0\",null!==(t=e.parentNode)&&void 0!==t&&t.insertBefore(f,e),null!==(n=e.parentNode)&&void 0!==n&&n.removeChild(e),f.appendChild(e))})}});\n","(function () {\r\n    pagination( isInfinite = false);\r\n})();\r\n\r\n/* Responsive video in post content */\r\n(function () {\r\n    const sources = [\r\n        '.verdin-content iframe[src*=\"youtube.com\"]',\r\n        '.verdin-content iframe[src*=\"youtube-nocookie.com\"]',\r\n        '.verdin-content iframe[src*=\"player.vimeo.com\"]',\r\n        '.verdin-content iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\r\n        '.verdin-content object',\r\n        '.verdin-content embed',\r\n    ];\r\n    reframe(document.querySelectorAll(sources.join(',')));\r\n})();\r\n\r\n\r\n/* Mobile menu burger toggle */\r\n(function () {\r\n    var head = document.querySelector('.gh-head');\r\n    var burger = head.querySelector('.gh-burger');\r\n    var verdinBody = document.getElementsByTagName(\"BODY\")[0];\r\n    if (!burger) return;\r\n\r\n    burger.addEventListener('click', function () {\r\n        if (!head.classList.contains('is-head-open')) {\r\n            verdinBody.classList.add('body-is-head-open');\r\n            head.classList.add('is-head-open');\r\n        } else {\r\n            verdinBody.classList.remove('body-is-head-open');\r\n            head.classList.remove('is-head-open');\r\n        }\r\n    });\r\n})();"]}